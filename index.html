<!DOCTYPE html>
<html>
<head>
  <title>MasabTank</title>
  <style>

   @page {
    size: A4;
    margin: 1cm;
  }  

    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .section-row {
      display: flex;
      gap: 20px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

   

    .items-table {
      flex: 2;
    }

    .expenses-table {
      flex: 1;
    }

    table {
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 0;
      height: 0px;
    }

    tr {
      height: 0;
    }


    input {
      width: 100%;
      height: 100%;
      border: none;
      padding: 1.5px;
      text-align: center;
      font-size: 14px;
      font-family: inherit;
      background-color: transparent;
      -moz-appearance: textfield;
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input:focus {
      outline: none;
      background-color: transparent;
    }

    th {
      background-color: #f2f2f2;
    }

    h3 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<!-- Section 1 -->
<div class="section-row">
  <div class="table-container items-table">
    <h3><input type="date"/></h3>
    <table>
      <thead>
        <tr>
          <th>Item Name</th>
          <th>YB</th>
          <th>TR</th>
          <th>Total</th>
          <th>TB</th>
          <th>T S</th>
          <th>Total Amount</th>
        </tr>
      </thead>
      <tbody id="items-body">
        <!-- Rows generated by JavaScript -->
      </tbody>
    </table>

<!-- Small Table Aligned Under Columns F and G -->
<div style="display: flex; justify-content: flex-end; margin-top: 10px;">
  <table style="border-collapse: collapse; width: 250px;">
    <tbody id="damaged-ps">
      <tr>
	<td>Total</td>
        <td id ="grand-total-cell" style="text-align: left;">0</td>
      </tr>
      <tr>
	<td>Damaged</td>
        <td><input type="number" oninput="damagedPS()" id="damaged-cell"/></td>
      </tr>
      <tr>
	<td>PS</td>
        <td><input type="number" oninput="damagedPS()" id="PS-cell"/></td>
      </tr>
      <tr>
        <th>Total:</th>
        <td id="damagedps-table-total" style="text-align: left;">0</td>
      </tr>
    </tbody>
  </table>
</div>

<div style="display: flex; justify-content: flex-end; margin-top: 10px;">
  <table style="border-collapse: collapse; width: 300px;">
    <tbody id="tea-coffee">
      <tr data-multiplier="20">
        <td>Tea</td>
        <td><input type="number" oninput="updateTeaCoffeeTotals()" /></td>
        <td class="result-cell">0</td>
      </tr>
      <tr data-multiplier="25">
        <td>Coffee</td>
        <td><input type="number" oninput="updateTeaCoffeeTotals()" /></td>
        <td class="result-cell">0</td>
      </tr>
      <tr>
        <td></td>
        <th>Total:</th>
        <td id="Tea-coffee-table-total" style="text-align: left;">0</td>
      </tr>
    </tbody>
  </table>
</div>



  </div>

  <div class="table-container expenses-table">
    <table id="expenditure-table" style ="margin-top: 54px;">
    <th >Expenditure</th>
    <tr><td>1. Wages</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>2. Bakery</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>3. Milk</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>4. Warna,w.cans</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>5. Butter,raju,change</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>6. TeaCups, Covers</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>7. GHMC</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>8. Auto rent</td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>9. </td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>10. </td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>11. </td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>
    <tr><td>12. </td><td><input type="number" oninput="calculateExpenditure()" /></td></tr>

    <tr><th>Total</th><td><input type="number" id="expenditure-total" readonly /></td></tr>

    <tr><td>Cash</td><td><input type="number" oninput="calculateExpenditureStep2()" id="cash" /></td></tr>
    <tr><td></td><td><input type="number" id="sum-total-cash" readonly /></td></tr>
    
    <tr><td>C/B</td><td><input type="number" oninput="calculateExpenditureStep2()" id="cash-balance" /></td></tr>
    <tr><td></td><td><input type="number" id="minus-cash-cb" readonly /></td></tr>
    
    <tr><td>Bakery Sale</td><td id="bakery-sale"></td></tr> 
    <tr><td></td><td><input type="number" id="minus-cash-bakery" readonly /></td></tr>
    
    <tr><td>Tea Sale</td><td id="tea-sale"></td></tr> 
    <tr><td>Final</td><td id="final"></td></tr>

   </table>
  </div>
</div>

<script>
  const items = ['Luqmi','Veg Samosa', 'Aloo Samosa','Veg Puff','Egg Puff','Chicken Puff','Tie B','Fine B','Osmania B','Khara B','S.B/MCR/B.R', 'Pastry/CreamR','Donut','Bun','Dilkhush','Veg sandW','ckn SandW','Mini Plum','Cream Bun','M/B,B/M','Tea box','Milk ltrs','water 500ml','water 1l','C/D 250ml','C/D 750ml'];
  const multipliers = [12,6, 20, 15, 15, 25, 10, 15, 5, 5, 12, 15,15,8,15,25,40,12,15,20,0,0,10,20,20,45];
  const numRows = items.length;
  const tbody = document.getElementById('items-body');
  let bakerySale=0;
  let teaSale=0;

  for (let i = 0; i < numRows; i++) {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${items[i]}</td>
      <td><input type="number" oninput="calculateRow(this)" /></td>
      <td><input type="number" oninput="calculateRow(this)" /></td>
      <td><input type="number" readonly /></td>
      <td><input type="number" oninput="calculateRow(this)" /></td>
      <td><input type="number" readonly /></td>
      <td><input type="number" readonly /></td>
    `;
    tbody.appendChild(tr);
  }

  function calculateRow(input) {
  const row = input.closest('tr');
  const allRows = Array.from(document.querySelectorAll('#items-body tr'));
  const rowIndex = allRows.indexOf(row);
  const inputs = row.querySelectorAll('input');

  const a = parseFloat(inputs[0].value) || 0;
  const b = parseFloat(inputs[1].value) || 0;
  const d = parseFloat(inputs[3].value) || 0;

  const c = a + b;
  const e = c - d;
  const f = e * (multipliers[rowIndex] || 1);

  inputs[2].value = c;
  inputs[4].value = e;
  inputs[5].value = f;

  calculateTotalAmount();
}

function calculateTotalAmount() {
  const rows = document.querySelectorAll('#items-body tr');
  let sum = 0;
  rows.forEach(row => {
    const lastCellInput = row.querySelectorAll('input')[5];
    sum += parseFloat(lastCellInput.value) || 0;
  });
  document.getElementById('grand-total-cell').textContent = sum.toFixed(0);
}

function damagedPS() {
  const total = parseFloat(document.getElementById('grand-total-cell').textContent) || 0;
  const damaged = parseFloat(document.getElementById('PS-cell').value) || 0;
  const ps = parseFloat(document.getElementById('damaged-cell').value) || 0;
  document.getElementById('damagedps-table-total').textContent = total- damaged- ps;
  bakerySale= total- damaged- ps
}

function updateTeaCoffeeTotals() {
  const rows = document.querySelectorAll('#tea-coffee tr');
  let sum = 0;

  rows.forEach(row => {
    const input = row.querySelector('input');
    const resultCell = row.querySelector('.result-cell');
    const multiplier = parseFloat(row.dataset.multiplier) || 0;

    if (input && resultCell) {
      const value = parseFloat(input.value) || 0;
      const calculated = value * multiplier;
      resultCell.textContent = calculated.toFixed(0);
      sum += calculated;
    }
  });

  document.getElementById('Tea-coffee-table-total').textContent = sum.toFixed(0);
  teaSale = sum.toFixed(0);
  
}


  function calculateExpenditure() {
    const table = document.getElementById('expenditure-table');
    const inputs = table.querySelectorAll('input:not([readonly])');
    let total = 0;
    inputs.forEach(input => {
      total += parseFloat(input.value) || 0;
    });
    document.getElementById('expenditure-total').value = total;
    calculateExpenditureStep2();
  }

function calculateExpenditureStep2() {
    const total = parseFloat(document.getElementById('expenditure-total').value) || 0;
    const cash = parseFloat(document.getElementById('cash').value) || 0;
    const cb = parseFloat(document.getElementById('cash-balance').value) || 0;
    const bakeryS = parseFloat(document.getElementById('damagedps-table-total').textContent) || 0;

    const sumCash = total + cash;
    const minusCB = sumCash - cb;
    const minusBakery = minusCB - bakeryS;

    document.getElementById('sum-total-cash').value = sumCash;
    document.getElementById('minus-cash-cb').value = minusCB;
    document.getElementById('minus-cash-bakery').value = minusBakery;
    document.getElementById('bakery-sale'). textContent = bakerySale;
    document.getElementById('tea-sale'). textContent = teaSale;
    document.getElementById('final'). textContent = teaSale-minusBakery;


  }

</script>

</body>
</html>
